# Test task in ISP (fuzzing)

Этот проект про применение фаззинга на open-source проекте на C/C++ с использованием AFL++. Выбранная программа, которая декодирует mp3 файлы: [minimp3](https://github.com/lieff/minimp3)

### Кастомная мутация

Кастомная мутация выполняет две главные задачи:

- Сохранение формата входных данных: Мутатор сохраняет общий формат MP3 файла после применения мутаций, что позволяет фаззеру эффективно работать с целевыми данными.
- Интеллектуальная мутация: Внесение изменений с учетом структуры MP3 файлов, что позволяет находить новые пути выполнения программы.

##### Моя мутация:
Мутация меняет фреймы в данных, изменяя отдельные байты с вероятностью 50%, и переставляет фреймы случайным образом, если размеры совпадают.

### Сравнение результатов

#### Графики
Два графика были созданы для сравнения результатов фаззинга с кастомной мутацией и без неё. Эти графики показывают количество обнаруженных путей с течением времени.

##### Функция mp3dec_decode_frame

График без кастомной мутации:

<img src = "Pictures/frame.jpg" width="800" height="250">

График онли с кастомной мутацией - изменение заголовка mp3 и перестановка фреймов файла:

<img src = "Pictures/with_mutation_frame2.jpg" width="800" height="250">


##### Функция mp3dec_ex_read

График без кастомной мутации:

<img src = "Pictures/without_mutator_func_read.jpg" width="800" height="250">

График онли с кастомной мутацией - изменение заголовка mp3 и перестановка фреймов файла:

<img src = "Pictures/with_mutator_func_read.jpg" width="800" height="250">

### Анализ
Графики показывают увеличение количества обнаруженных путей при использовании кастомной мутации по сравнению с использованием стандартных мутаций. Это показывает эффективность кастомного мутатора для MP3 файлов во время фаззинга.

### Еще слова

##### Провалы из-за macOS 11
Изначально я пыталась выполнить задание на своем ноуте с macOS 11, однако постоянно сталкивалась с ошибками из-за старой версии macOS. Проблемы включали несовместимости с библиотеками и че-то дофига еще всего. При каждом шаге возникали какие-то ошибки, например, устаревшие зависимости, конфликты версий и отсутствие поддержки некоторых инструментов для macOS. Я долго пыталась что-нибудь с этим сделать, но в итоге решила перейти на другой ноут, потому что я и так уже ну оооочень много времени потратила на свой старый макос)))))))

<img src = "Pictures/я.jpeg" width="350" height="250">

##### Переход на Linux
Я перешла на ноутбук с Linux, и установка необходимых инструментов и библиотек прошла без проблем. (нужно было так сделать сразу..........)

##### Выбор проекта
Изначально я выбрала проект с pdf файлами. Я потратила день на изучение структуры PDF файлов и поняла, что ну чет... ну прям сложно как-то. Если учитывать то, что я этим занималась еще на своем старом ноуте, то там были постоянные проблемы с написанием мутаций, так еще и библиотеки для работы с pdf не устанавливались. (возможно, если бы я с пдфками че-то делала на linux, то может все бы и получилось). Но в итоге я решила просто перейти на mp3.

##### Использование готового таргета и создание новых
В проекте [minimp3](https://github.com/lieff/minimp3) уже был готовый фазз-таргет, который использовал одну из основных функций декодера MP3. Однако я  решила написать дополнительный таргеты к функции read. 



